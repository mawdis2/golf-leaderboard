<!-- templates/add_birdie.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Birdie</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Add Birdie</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    <form method="POST" action="{{ url_for('add_birdie') }}">
        <label for="player_id">Player:</label>
        <select name="player_id" id="player_id" required>
            {% for player in players %}
                <option value="{{ player.id }}">{{ player.name }}</option>
            {% endfor %}
        </select>
        <br>
        <label for="course_id">Course:</label>
        <select name="course_id" id="course_id" required>
            {% for course in courses %}
                <option value="{{ course.id }}">{{ course.name }}</option>
            {% endfor %}
        </select>
        <br>
        <label for="date">Date:</label>
        <input type="date" name="date" id="date" required>
        <br>
        <label for="is_eagle">Eagle?</label>
        <input type="checkbox" name="is_eagle" id="is_eagle">
        <br>
        <button type="submit">Add Score</button>
    </form>
    <h2>Add New Course</h2>
    <form method="POST" action="{{ url_for('add_course') }}">
        <label for="new_course">Course Name:</label>
        <input type="text" id="new_course" name="new_course" required>
        <button type="submit">Add Course</button>
    </form>
    <div class="button-container">
        <a href="{{ url_for('leaderboard') }}">Back to Leaderboard</a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get current date
            const today = new Date().toISOString().split('T')[0];
            const currentYear = new Date().getFullYear();
            const startOfYear = `${currentYear}-01-01`;
            
            // Get date input element
            const dateInput = document.getElementById('date');
            
            // Set min date to start of current year
            dateInput.min = startOfYear;
            
            // Set max date to today
            dateInput.max = today;
            
            // Set default value to today
            dateInput.value = today;
        });
    </script>
</body>
</html>